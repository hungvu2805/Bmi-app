<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>App TÃ­nh BMI, TDEE, Macro</title>
  <meta name="theme-color" content="#d63384" />
  <style>
    body {
      font-family: 'Arial', sans-serif;
      background-color: #ffe6f0;
      max-width: 480px;
      margin: 30px auto;
      padding: 20px;
      color: #333;
      box-shadow: 0 0 10px #aaa;
      border-radius: 20px;
    }
    h2 {
      text-align: center;
      color: #d63384;
    }
    label, input, select, button {
      display: block;
      width: 100%;
      margin-top: 10px;
      font-size: 16px;
    }
    button {
      background-color: #d63384;
      color: white;
      border: none;
      padding: 12px;
      border-radius: 8px;
      cursor: pointer;
      margin-top: 20px;
    }
    button:hover {
      background-color: #b82d6b;
    }
    .result {
      background: #fff;
      padding: 15px;
      border-left: 4px solid #d63384;
      margin-top: 20px;
      border-radius: 6px;
    }
    .zalo {
      margin-top: 15px;
      text-align: center;
    }
    .zalo a {
      background: #00a1d6;
      color: white;
      padding: 10px 20px;
      display: inline-block;
      border-radius: 6px;
      text-decoration: none;
    }
  </style>

  <!-- Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-7E02Y8X1WZ"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'G-7E02Y8X1WZ');
  </script>
</head>
<body>

<h2>ğŸ’– TÃ­nh BMI â€“ TDEE â€“ Gá»£i Ã½ dinh dÆ°á»¡ng ğŸ’–</h2>

<label>ğŸ“ CÃ¢n náº·ng (kg):</label>
<input type="number" id="weight" step="0.1" required>

<label>ğŸ“ Chiá»u cao (cm):</label>
<input type="number" id="height" required>

<label>ğŸ”¥ Má»©c Ä‘á»™ hoáº¡t Ä‘á»™ng (PAL):</label>
<select id="pal">
  <option value="1.2">1.2 â€“ Ãt váº­n Ä‘á»™ng</option>
  <option value="1.55">1.55 â€“ Váº­n Ä‘á»™ng vá»«a</option>
  <option value="1.75">1.75 â€“ Táº­p luyá»‡n cao</option>
</select>

<label>ğŸ¯ Má»¥c tiÃªu:</label>
<select id="goal">
  <option value="giam">Giáº£m má»¡</option>
  <option value="co">TÄƒng cÆ¡</option>
</select>

<button onclick="tinh()">ğŸ’¥ TÃ­nh ngay</button>

<div id="output" class="result" style="display:none;"></div>

<div class="zalo">
  ğŸ“© Cáº§n tÆ° váº¥n riÃªng? <br>
  <a href="https://zalo.me/0981781056" target="_blank">Gá»­i káº¿t quáº£ qua Zalo</a>
</div>

<div id="history" class="result" style="display:none;"></div>

<script>
function tinh() {
  let weight = parseFloat(document.getElementById('weight').value);
  let height = parseFloat(document.getElementById('height').value);
  let pal = parseFloat(document.getElementById('pal').value);
  let goal = document.getElementById('goal').value;

  if (!weight || !height) return alert("Vui lÃ²ng nháº­p Ä‘áº§y Ä‘á»§.");

  let heightM = height / 100;
  let bmi = weight / (heightM * heightM);
  let status = "";
  if (bmi < 18.5) status = "Thiáº¿u cÃ¢n";
  else if (bmi <= 22.9) status = "Trung bÃ¬nh";
  else if (bmi <= 24.9) status = "Thá»«a cÃ¢n";
  else if (bmi <= 29.9) status = "BÃ©o phÃ¬ Ä‘á»™ I";
  else status = "BÃ©o phÃ¬ Ä‘á»™ II";

  let ideal = (height - 100) * 0.9;
  let bmr = weight * 22;
  let tdee = bmr * pal;
  let defPercent = (bmi <= 22.9) ? 0.10 : (bmi <= 24.9) ? 0.25 : 0.35;
  let der = Math.round(tdee - tdee * defPercent);

  let protein = 110;
  let pCalo = protein * 4;
  let cCalo = goal === "co" ? der * 0.35 : der * 0.1;
  let fCalo = der - pCalo - cCalo;

  let output = `
    <strong>BMI:</strong> ${bmi.toFixed(1)} (${status})<br>
    <strong>CÃ¢n náº·ng lÃ½ tÆ°á»Ÿng:</strong> ${ideal.toFixed(1)} kg<br>
    <strong>BMR:</strong> ${Math.round(bmr)} cal<br>
    <strong>TDEE:</strong> ${Math.round(tdee)} cal<br>
    <strong>DER (calo má»¥c tiÃªu):</strong> ${der} cal<br>
    <strong>Macro:</strong><br>
    â€¢ Protein: ${protein}g (${pCalo} cal)<br>
    â€¢ Carb: ${Math.round(cCalo / 4)}g (${Math.round(cCalo)} cal)<br>
    â€¢ Fat: ${Math.round(fCalo / 9)}g (${Math.round(fCalo)} cal)<br><br>
  `;

  let keHoach = "";
  if (goal === "giam") {
    keHoach = `
    <h3>ğŸ“… Káº¿ hoáº¡ch táº­p giáº£m má»¡:</h3>
    <ul>
      <li>Thá»© 2: Cardio 30' + Fullbody</li>
      <li>Thá»© 3: MÃ´ng â€“ ChÃ¢n</li>
      <li>Thá»© 4: Yoga + Ä‘i bá»™</li>
      <li>Thá»© 5: HIIT + Bá»¥ng</li>
      <li>Thá»© 6: ToÃ n thÃ¢n</li>
      <li>Thá»© 7: Zumba / Ä‘i bá»™</li>
      <li>Chá»§ nháº­t: Nghá»‰</li>
    </ul>
    <h3>ğŸ½ Gá»£i Ã½ Äƒn 1600kcal:</h3>
    <ul>
      <li>SÃ¡ng: Yáº¿n máº¡ch + sá»¯a háº¡t + chuá»‘i</li>
      <li>TrÆ°a: á»¨c gÃ  + cÆ¡m gáº¡o lá»©t + rau</li>
      <li>Chiá»u: Sá»¯a chua + háº¡t</li>
      <li>Tá»‘i: CÃ¡ há»“i + bÃ´ng cáº£i</li>
    </ul>
    `;
  } else {
    keHoach = `
    <h3>ğŸ’ª Káº¿ hoáº¡ch táº­p tÄƒng cÆ¡:</h3>
    <ul>
      <li>Thá»© 2: Ngá»±c â€“ Tay sau</li>
      <li>Thá»© 3: LÆ°ng â€“ Tay trÆ°á»›c</li>
      <li>Thá»© 4: Cardio nháº¹</li>
      <li>Thá»© 5: Vai â€“ MÃ´ng</li>
      <li>Thá»© 6: ToÃ n thÃ¢n tÄƒng táº£i</li>
      <li>Thá»© 7: Core + Cardio</li>
      <li>Chá»§ nháº­t: Nghá»‰</li>
    </ul>
    <h3>ğŸ½ Gá»£i Ã½ Äƒn 2100kcal:</h3>
    <ul>
      <li>SÃ¡ng: BÃ¡nh mÃ¬ trá»©ng + sá»¯a</li>
      <li>TrÆ°a: Thá»‹t bÃ² + khoai lang + rau</li>
      <li>Chiá»u: Whey + chuá»‘i</li>
      <li>Tá»‘i: CÃ¡ thu + cÆ¡m + rau</li>
    </ul>
    `;
  }

  document.getElementById("output").innerHTML = output + keHoach;
  document.getElementById("output").style.display = "block";

  // LÆ°u lá»‹ch sá»­
  let name = prompt("Nháº­p tÃªn Ä‘á»ƒ lÆ°u káº¿t quáº£:");
  if (name) {
    localStorage.setItem(name, JSON.stringify({ bmi: bmi.toFixed(1), der, tdee: Math.round(tdee) }));
    alert(`ÄÃ£ lÆ°u káº¿t quáº£ cho ${name}`);
    hienLichSu();
  }
}

// Hiá»ƒn thá»‹ lá»‹ch sá»­ khi load láº¡i trang
function hienLichSu() {
  let out = "<h3>ğŸ“ Lá»‹ch sá»­ ngÆ°á»i dÃ¹ng:</h3>";
  for (let i = 0; i < localStorage.length; i++) {
    let key = localStorage.key(i);
    let val = JSON.parse(localStorage.getItem(key));
    out += `<p><strong>${key}</strong>: BMI ${val.bmi}, TDEE ${val.tdee}, DER ${val.der}</p>`;
  }
  let hisDiv = document.getElementById("history");
  hisDiv.innerHTML = out;
  hisDiv.style.display = "block";
}
window.onload = hienLichSu;
</script>

</body>
</html>
